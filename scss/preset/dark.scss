// This file is part of Moodle - http://moodle.org/
//
// Moodle is free software: you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
//
// Moodle is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.

/**
 * Preset de modo escuro do tema UFPel
 *
 * @package    theme_ufpel
 * @copyright  2025 Universidade Federal de Pelotas
 * @author     Seu Nome
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */

// =============================================================================
// IMPORTAÇÕES BASE
// =============================================================================

// CORREÇÃO: Não importar o preset default, pois causa recursão
// Importar apenas os módulos necessários com caminhos corretos

// Sistema de cores UFPel
@import "../ufpel/colors";

// Configurações de tipografia
@import "../ufpel/typography";

// =============================================================================
// VARIÁVEIS DARK MODE
// =============================================================================

// Cores de fundo escuras
$dark-bg-primary: #1a1a1a !default;
$dark-bg-secondary: #2d2d2d !default;
$dark-bg-tertiary: #404040 !default;
$dark-bg-card: #242424 !default;
$dark-bg-hover: #333333 !default;
$dark-bg-active: #3a3a3a !default;

// Cores de texto no modo escuro
$dark-text-primary: #e0e0e0 !default;
$dark-text-secondary: #b0b0b0 !default;
$dark-text-muted: #808080 !default;
$dark-text-highlight: #ffffff !default;

// Cores UFPel adaptadas para modo escuro
$dark-ufpel-primary: #3399ff !default;
$dark-ufpel-secondary: #0066cc !default;
$dark-ufpel-accent: #ffb833 !default;
$dark-ufpel-success: #4caf50 !default;
$dark-ufpel-warning: #ff9800 !default;
$dark-ufpel-danger: #f44336 !default;
$dark-ufpel-info: #2196f3 !default;

// Bordas no modo escuro
$dark-border-color: rgba(255, 255, 255, 0.1) !default;
$dark-border-color-light: rgba(255, 255, 255, 0.05) !default;
$dark-border-color-strong: rgba(255, 255, 255, 0.2) !default;

// Sombras adaptadas
$dark-shadow-sm: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.3) !default;
$dark-shadow-base: 0 0.5rem 1rem rgba(0, 0, 0, 0.4) !default;
$dark-shadow-lg: 0 1rem 3rem rgba(0, 0, 0, 0.5) !default;

// =============================================================================
// OVERRIDE DE VARIÁVEIS BOOTSTRAP PARA DARK MODE
// =============================================================================

// Redefine cores primárias para o modo escuro
$primary: $dark-ufpel-primary !default;
$secondary: $dark-ufpel-secondary !default;
$info: $dark-ufpel-info !default;
$success: $dark-ufpel-success !default;
$warning: $dark-ufpel-warning !default;
$danger: $dark-ufpel-danger !default;

// Redefine cores de fundo
$body-bg: $dark-bg-primary !default;
$body-color: $dark-text-primary !default;

// Redefine sistema de grays
$gray-100: lighten($dark-bg-primary, 10%) !default;
$gray-200: lighten($dark-bg-primary, 15%) !default;
$gray-300: lighten($dark-bg-primary, 20%) !default;
$gray-400: lighten($dark-bg-primary, 25%) !default;
$gray-500: lighten($dark-bg-primary, 30%) !default;
$gray-600: lighten($dark-bg-primary, 35%) !default;
$gray-700: lighten($dark-bg-primary, 40%) !default;
$gray-800: lighten($dark-bg-primary, 45%) !default;
$gray-900: $dark-text-primary !default;

// Configurações de links
$link-color: $dark-ufpel-primary !default;
$link-hover-color: lighten($dark-ufpel-primary, 10%) !default;

// =============================================================================
// APLICAÇÃO DO TEMA ESCURO - VERSÃO SIMPLIFICADA
// =============================================================================

// CORREÇÃO: Aplicar estilos diretamente sem usar body.theme-dark-mode
// porque o SCSS é compilado antes da classe ser adicionada

// Estilos base para modo escuro
body {
    background-color: $dark-bg-primary;
    color: $dark-text-primary;
}

// Headings
h1, h2, h3, h4, h5, h6,
.h1, .h2, .h3, .h4, .h5, .h6 {
    color: $dark-text-highlight;
}

// Links
a {
    color: $dark-ufpel-primary;
    
    &:hover,
    &:focus {
        color: lighten($dark-ufpel-primary, 10%);
    }
}

// Cards
.card {
    background-color: $dark-bg-card;
    border-color: $dark-border-color;
    
    .card-header {
        background-color: $dark-bg-secondary;
        border-bottom-color: $dark-border-color;
        color: $dark-text-highlight;
    }
    
    .card-body {
        color: $dark-text-primary;
    }
}

// Navbar
.navbar {
    background-color: $dark-bg-secondary !important;
    border-bottom: 1px solid $dark-border-color;
    
    .navbar-brand {
        color: $dark-text-highlight !important;
    }
    
    .navbar-nav .nav-link {
        color: $dark-text-primary !important;
        
        &:hover,
        &:focus {
            color: $dark-text-highlight !important;
            background-color: $dark-bg-hover;
        }
    }
}

// Forms
.form-control,
.form-select,
textarea,
select,
input[type="text"],
input[type="email"],
input[type="password"] {
    background-color: $dark-bg-tertiary;
    border-color: $dark-border-color;
    color: $dark-text-primary;
    
    &:focus {
        background-color: $dark-bg-secondary;
        border-color: $dark-ufpel-primary;
        color: $dark-text-primary;
    }
    
    &::placeholder {
        color: $dark-text-muted;
    }
}

// Botões
.btn-primary {
    background-color: $dark-ufpel-primary;
    border-color: $dark-ufpel-primary;
}

.btn-secondary {
    background-color: $dark-bg-tertiary;
    border-color: $dark-border-color;
    color: $dark-text-primary;
    
    &:hover {
        background-color: $dark-bg-hover;
        color: $dark-text-highlight;
    }
}

// Tabelas
.table {
    color: $dark-text-primary;
    
    thead th {
        background-color: $dark-bg-secondary;
        border-color: $dark-border-color;
        color: $dark-text-highlight;
    }
    
    tbody td {
        border-color: $dark-border-color;
    }
}

// Dropdown
.dropdown-menu {
    background-color: $dark-bg-secondary;
    border-color: $dark-border-color;
    
    .dropdown-item {
        color: $dark-text-primary;
        
        &:hover,
        &:focus {
            background-color: $dark-bg-hover;
            color: $dark-text-highlight;
        }
    }
}

// Footer
.footer,
#page-footer {
    background-color: $dark-bg-secondary;
    color: $dark-text-primary;
}

// Course cards
.course-card,
.dashboard-card {
    background-color: $dark-bg-card;
    border-color: $dark-border-color;
}