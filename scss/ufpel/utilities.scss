/**
 * UFPel Theme Utilities Module
 * 
 * Utility classes and helper functions for the UFPel theme.
 * Extends Bootstrap 5 utilities with UFPel-specific helpers.
 *
 * @package    theme_ufpel
 * @copyright  2025 Universidade Federal de Pelotas (UFPel)
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */

// =============================================================================
// UFPel Spacing Utilities
// =============================================================================

// Generate UFPel spacing utilities
@each $breakpoint in map-keys($ufpel-grid-breakpoints) {
    @include media-breakpoint-up($breakpoint) {
        $infix: if($breakpoint == xs, "", "-#{$breakpoint}");
        
        @each $prop, $abbrev in (margin: m, padding: p) {
            @each $size, $length in (
                xs: $ufpel-spacer-xs,
                sm: $ufpel-spacer-sm,
                md: $ufpel-spacer-md,
                lg: $ufpel-spacer-lg,
                xl: $ufpel-spacer-xl,
                xxl: $ufpel-spacer-xxl
            ) {
                .#{$abbrev}#{$infix}-#{$size} { #{$prop}: $length !important; }
                .#{$abbrev}t#{$infix}-#{$size} { #{$prop}-top: $length !important; }
                .#{$abbrev}r#{$infix}-#{$size} { #{$prop}-right: $length !important; }
                .#{$abbrev}b#{$infix}-#{$size} { #{$prop}-bottom: $length !important; }
                .#{$abbrev}l#{$infix}-#{$size} { #{$prop}-left: $length !important; }
                .#{$abbrev}x#{$infix}-#{$size} { 
                    #{$prop}-right: $length !important; 
                    #{$prop}-left: $length !important; 
                }
                .#{$abbrev}y#{$infix}-#{$size} { 
                    #{$prop}-top: $length !important; 
                    #{$prop}-bottom: $length !important; 
                }
            }
        }
    }
}

// Section-specific spacing
.section-padding {
    padding: $ufpel-section-padding 0;
    
    @media (max-width: $ufpel-mobile-max) {
        padding: ($ufpel-section-padding / 2) 0;
    }
}

.container-padding {
    padding-left: $ufpel-container-padding;
    padding-right: $ufpel-container-padding;
}

// =============================================================================
// UFPel Display and Visibility Utilities
// =============================================================================

// UFPel-specific responsive display utilities
@each $breakpoint in map-keys($ufpel-grid-breakpoints) {
    @include media-breakpoint-up($breakpoint) {
        $infix: if($breakpoint == xs, "", "-#{$breakpoint}");
        
        .d#{$infix}-ufpel-block { display: block !important; }
        .d#{$infix}-ufpel-inline { display: inline !important; }
        .d#{$infix}-ufpel-inline-block { display: inline-block !important; }
        .d#{$infix}-ufpel-flex { display: flex !important; }
        .d#{$infix}-ufpel-inline-flex { display: inline-flex !important; }
        .d#{$infix}-ufpel-grid { display: grid !important; }
        .d#{$infix}-ufpel-none { display: none !important; }
    }
}

// Visibility utilities
.visible-ufpel { visibility: visible !important; }
.invisible-ufpel { visibility: hidden !important; }

// Screen reader utilities
.show-on-focus {
    position: absolute !important;
    left: -10000px !important;
    top: auto !important;
    width: 1px !important;
    height: 1px !important;
    overflow: hidden !important;
    
    &:focus {
        position: static !important;
        width: auto !important;
        height: auto !important;
        left: auto !important;
        overflow: visible !important;
    }
}

// =============================================================================
// UFPel Flexbox Utilities
// =============================================================================

// Extended flexbox utilities
.flex-ufpel-center {
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
}

.flex-ufpel-between {
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
}

.flex-ufpel-around {
    display: flex !important;
    justify-content: space-around !important;
    align-items: center !important;
}

.flex-ufpel-column-center {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
}

// Flex grow/shrink utilities
.flex-grow-ufpel { flex-grow: 1 !important; }
.flex-shrink-ufpel { flex-shrink: 1 !important; }
.flex-no-shrink-ufpel { flex-shrink: 0 !important; }

// =============================================================================
// UFPel Position Utilities
// =============================================================================

// Position utilities
.position-ufpel-center {
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
}

.position-ufpel-center-x {
    position: absolute !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
}

.position-ufpel-center-y {
    position: absolute !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
}

// Pin utilities
.pin-ufpel-top { 
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: $ufpel-z-index-fixed;
}

.pin-ufpel-bottom {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: $ufpel-z-index-fixed;
}

// =============================================================================
// UFPel Border Utilities
// =============================================================================

// Border radius utilities
@each $size, $radius in (
    xs: $ufpel-border-radius-sm,
    sm: $ufpel-border-radius,
    md: $ufpel-border-radius-md,
    lg: $ufpel-border-radius-lg,
    xl: $ufpel-border-radius-xl,
    pill: $ufpel-border-radius-pill
) {
    .rounded-ufpel-#{$size} { border-radius: $radius !important; }
    .rounded-top-ufpel-#{$size} { 
        border-top-left-radius: $radius !important; 
        border-top-right-radius: $radius !important; 
    }
    .rounded-bottom-ufpel-#{$size} { 
        border-bottom-left-radius: $radius !important; 
        border-bottom-right-radius: $radius !important; 
    }
    .rounded-left-ufpel-#{$size} { 
        border-top-left-radius: $radius !important; 
        border-bottom-left-radius: $radius !important; 
    }
    .rounded-right-ufpel-#{$size} { 
        border-top-right-radius: $radius !important; 
        border-bottom-right-radius: $radius !important; 
    }
}

// Border width utilities
.border-ufpel-thin { border-width: 1px !important; }
.border-ufpel-thick { border-width: $ufpel-border-width-thick !important; }
.border-ufpel-accent { border-width: $ufpel-border-width-accent !important; }

// Border style utilities
.border-ufpel-solid { border-style: solid !important; }
.border-ufpel-dashed { border-style: dashed !important; }
.border-ufpel-dotted { border-style: dotted !important; }

// =============================================================================
// UFPel Shadow Utilities
// =============================================================================

// Box shadow utilities
.shadow-ufpel-xs { @include ufpel-shadow('sm'); }
.shadow-ufpel-sm { @include ufpel-shadow('sm'); }
.shadow-ufpel { @include ufpel-shadow('md'); }
.shadow-ufpel-md { @include ufpel-shadow('md'); }
.shadow-ufpel-lg { @include ufpel-shadow('lg'); }
.shadow-ufpel-xl { @include ufpel-shadow('xl'); }
.shadow-ufpel-none { box-shadow: none !important; }

// Inset shadows
.shadow-ufpel-inset {
    box-shadow: inset 0 2px 4px rgba(0, 64, 143, 0.1) !important;
}

// Colored shadows
.shadow-ufpel-primary { @include ufpel-shadow('md', $ufpel-blue-primary, 0.15); }
.shadow-ufpel-secondary { @include ufpel-shadow('md', $ufpel-blue-secondary, 0.15); }
.shadow-ufpel-accent { @include ufpel-shadow('md', $ufpel-orange-accent, 0.15); }

// =============================================================================
// UFPel Typography Utilities
// =============================================================================

// Font size utilities
.fs-ufpel-xs { font-size: 0.75rem !important; }
.fs-ufpel-sm { font-size: $ufpel-font-size-sm !important; }
.fs-ufpel-base { font-size: $ufpel-font-size-base !important; }
.fs-ufpel-lg { font-size: $ufpel-font-size-lg !important; }
.fs-ufpel-xl { font-size: $ufpel-font-size-xl !important; }
.fs-ufpel-2xl { font-size: 1.5rem !important; }
.fs-ufpel-3xl { font-size: 1.875rem !important; }
.fs-ufpel-4xl { font-size: 2.25rem !important; }
.fs-ufpel-5xl { font-size: 3rem !important; }

// Font weight utilities
.fw-ufpel-light { font-weight: $ufpel-font-weight-light !important; }
.fw-ufpel-normal { font-weight: $ufpel-font-weight-normal !important; }
.fw-ufpel-medium { font-weight: $ufpel-font-weight-medium !important; }
.fw-ufpel-semibold { font-weight: $ufpel-font-weight-semibold !important; }
.fw-ufpel-bold { font-weight: $ufpel-font-weight-bold !important; }

// Line height utilities
.lh-ufpel-sm { line-height: $ufpel-line-height-sm !important; }
.lh-ufpel-base { line-height: $ufpel-line-height-base !important; }
.lh-ufpel-lg { line-height: $ufpel-line-height-lg !important; }
.lh-ufpel-1 { line-height: 1 !important; }

// Text decoration utilities
.text-underline-ufpel { text-decoration: underline !important; }
.text-line-through-ufpel { text-decoration: line-through !important; }
.text-no-underline-ufpel { text-decoration: none !important; }

// Letter spacing utilities
.tracking-ufpel-tighter { letter-spacing: -0.05em !important; }
.tracking-ufpel-tight { letter-spacing: -0.025em !important; }
.tracking-ufpel-normal { letter-spacing: 0 !important; }
.tracking-ufpel-wide { letter-spacing: 0.025em !important; }
.tracking-ufpel-wider { letter-spacing: 0.05em !important; }
.tracking-ufpel-widest { letter-spacing: 0.1em !important; }

// =============================================================================
// UFPel Transform Utilities
// =============================================================================

// Transform utilities
.transform-ufpel-none { transform: none !important; }
.transform-ufpel-gpu { transform: translate3d(0, 0, 0) !important; }

// Scale utilities
.scale-ufpel-90 { transform: scale(0.9) !important; }
.scale-ufpel-95 { transform: scale(0.95) !important; }
.scale-ufpel-100 { transform: scale(1) !important; }
.scale-ufpel-105 { transform: scale(1.05) !important; }
.scale-ufpel-110 { transform: scale(1.1) !important; }
.scale-ufpel-125 { transform: scale(1.25) !important; }
.scale-ufpel-150 { transform: scale(1.5) !important; }

// Rotate utilities
.rotate-ufpel-0 { transform: rotate(0deg) !important; }
.rotate-ufpel-45 { transform: rotate(45deg) !important; }
.rotate-ufpel-90 { transform: rotate(90deg) !important; }
.rotate-ufpel-180 { transform: rotate(180deg) !important; }
.rotate-ufpel-270 { transform: rotate(270deg) !important; }

// Translate utilities
.translate-x-ufpel-1 { transform: translateX(0.25rem) !important; }
.translate-x-ufpel-2 { transform: translateX(0.5rem) !important; }
.translate-x-ufpel-3 { transform: translateX(0.75rem) !important; }
.translate-x-ufpel-4 { transform: translateX(1rem) !important; }

.translate-y-ufpel-1 { transform: translateY(0.25rem) !important; }
.translate-y-ufpel-2 { transform: translateY(0.5rem) !important; }
.translate-y-ufpel-3 { transform: translateY(0.75rem) !important; }
.translate-y-ufpel-4 { transform: translateY(1rem) !important; }

// =============================================================================
// UFPel Animation and Transition Utilities
// =============================================================================

// Transition utilities
.transition-ufpel-none { transition: none !important; }
.transition-ufpel-all { transition: $ufpel-transition-default !important; }
.transition-ufpel-colors { 
    transition: color $ufpel-transition-base ease,
                background-color $ufpel-transition-base ease,
                border-color $ufpel-transition-base ease !important;
}
.transition-ufpel-opacity { transition: opacity $ufpel-transition-base ease !important; }
.transition-ufpel-shadow { transition: box-shadow $ufpel-transition-base ease !important; }
.transition-ufpel-transform { transition: $ufpel-transition-transform !important; }

// Duration utilities
.duration-ufpel-fast { transition-duration: $ufpel-transition-fast !important; }
.duration-ufpel-base { transition-duration: $ufpel-transition-base !important; }
.duration-ufpel-slow { transition-duration: $ufpel-transition-slow !important; }

// Easing utilities
.ease-ufpel-linear { transition-timing-function: linear !important; }
.ease-ufpel-in { transition-timing-function: ease-in !important; }
.ease-ufpel-out { transition-timing-function: ease-out !important; }
.ease-ufpel-in-out { transition-timing-function: ease-in-out !important; }
.ease-ufpel-bounce { transition-timing-function: $ufpel-ease-bounce !important; }

// Animation utilities
.animate-ufpel-pulse {
    animation: ufpel-pulse 2s infinite ease-in-out;
}

.animate-ufpel-bounce {
    animation: ufpel-bounce 1s infinite;
}

.animate-ufpel-spin {
    animation: ufpel-spin 1s linear infinite;
}

.animate-ufpel-fade-in {
    animation: ufpel-fade-in $ufpel-fade-in-duration ease-out;
}

.animate-ufpel-slide-in-up {
    animation: ufpel-slide-in-up $ufpel-slide-in-duration ease-out;
}

.animate-ufpel-scale-in {
    animation: ufpel-scale-in $ufpel-scale-in-duration ease-out;
}

// =============================================================================
// UFPel Filter and Effects Utilities
// =============================================================================

// Blur utilities
.blur-ufpel-none { filter: blur(0) !important; }
.blur-ufpel-sm { filter: blur($ufpel-blur-sm) !important; }
.blur-ufpel-md { filter: blur($ufpel-blur-md) !important; }
.blur-ufpel-lg { filter: blur($ufpel-blur-lg) !important; }

// Brightness utilities
.brightness-ufpel-50 { filter: brightness(0.5) !important; }
.brightness-ufpel-75 { filter: brightness(0.75) !important; }
.brightness-ufpel-100 { filter: brightness(1) !important; }
.brightness-ufpel-125 { filter: brightness(1.25) !important; }
.brightness-ufpel-150 { filter: brightness(1.5) !important; }

// Opacity utilities
@for $i from 0 through 10 {
    .opacity-ufpel-#{$i} { opacity: $i / 10 !important; }
}

// Grayscale utilities
.grayscale-ufpel-0 { filter: grayscale(0) !important; }
.grayscale-ufpel-50 { filter: grayscale(0.5) !important; }
.grayscale-ufpel-100 { filter: grayscale(1) !important; }

// =============================================================================
// UFPel Hover and Focus Utilities
// =============================================================================

// Hover effects
.hover-ufpel-lift:hover {
    transform: translateY($ufpel-hover-lift-distance) !important;
    @include ufpel-shadow('lg');
}

.hover-ufpel-scale:hover {
    transform: scale($ufpel-hover-scale-factor) !important;
}

.hover-ufpel-rotate:hover {
    transform: rotate(5deg) !important;
}

.hover-ufpel-grow:hover {
    transform: scale(1.1) !important;
}

.hover-ufpel-shrink:hover {
    transform: scale(0.95) !important;
}

// Focus effects
.focus-ufpel-ring:focus {
    outline: none !important;
    box-shadow: 0 0 0 3px rgba(0, 64, 143, 0.3) !important;
}

.focus-ufpel-ring-accent:focus {
    outline: none !important;
    box-shadow: 0 0 0 3px rgba(247, 166, 0, 0.3) !important;
}

// =============================================================================
// UFPel Layout Utilities
// =============================================================================

// Aspect ratio utilities
.aspect-ufpel-square {
    aspect-ratio: 1 / 1;
}

.aspect-ufpel-video {
    aspect-ratio: 16 / 9;
}

.aspect-ufpel-photo {
    aspect-ratio: 4 / 3;
}

.aspect-ufpel-golden {
    aspect-ratio: 1.618 / 1;
}

// Object fit utilities
.object-ufpel-contain { object-fit: contain !important; }
.object-ufpel-cover { object-fit: cover !important; }
.object-ufpel-fill { object-fit: fill !important; }
.object-ufpel-none { object-fit: none !important; }
.object-ufpel-scale-down { object-fit: scale-down !important; }

// Object position utilities
.object-ufpel-bottom { object-position: bottom !important; }
.object-ufpel-center { object-position: center !important; }
.object-ufpel-left { object-position: left !important; }
.object-ufpel-left-bottom { object-position: left bottom !important; }
.object-ufpel-left-top { object-position: left top !important; }
.object-ufpel-right { object-position: right !important; }
.object-ufpel-right-bottom { object-position: right bottom !important; }
.object-ufpel-right-top { object-position: right top !important; }
.object-ufpel-top { object-position: top !important; }

// =============================================================================
// UFPel Cursor Utilities
// =============================================================================

// Cursor utilities
.cursor-ufpel-auto { cursor: auto !important; }
.cursor-ufpel-default { cursor: default !important; }
.cursor-ufpel-pointer { cursor: pointer !important; }
.cursor-ufpel-wait { cursor: wait !important; }
.cursor-ufpel-text { cursor: text !important; }
.cursor-ufpel-move { cursor: move !important; }
.cursor-ufpel-not-allowed { cursor: not-allowed !important; }
.cursor-ufpel-help { cursor: help !important; }

// =============================================================================
// UFPel User Select Utilities
// =============================================================================

// User select utilities
.select-ufpel-none { user-select: none !important; }
.select-ufpel-text { user-select: text !important; }
.select-ufpel-all { user-select: all !important; }
.select-ufpel-auto { user-select: auto !important; }

// =============================================================================
// UFPel Backdrop Utilities
// =============================================================================

// Backdrop filter utilities
.backdrop-ufpel-blur-none { backdrop-filter: blur(0) !important; }
.backdrop-ufpel-blur-sm { backdrop-filter: blur(4px) !important; }
.backdrop-ufpel-blur-md { backdrop-filter: blur(8px) !important; }
.backdrop-ufpel-blur-lg { backdrop-filter: blur(16px) !important; }
.backdrop-ufpel-blur-xl { backdrop-filter: blur(24px) !important; }

// =============================================================================
// UFPel Animation Keyframes
// =============================================================================

@keyframes ufpel-pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

@keyframes ufpel-bounce {
    0%, 20%, 53%, 80%, 100% { transform: translate3d(0, 0, 0); }
    40%, 43% { transform: translate3d(0, -30px, 0); }
    70% { transform: translate3d(0, -15px, 0); }
    90% { transform: translate3d(0, -4px, 0); }
}

@keyframes ufpel-spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

@keyframes ufpel-fade-in {
    0% { opacity: 0; }
    100% { opacity: 1; }
}

@keyframes ufpel-slide-in-up {
    0% { 
        opacity: 0; 
        transform: translateY(30px); 
    }
    100% { 
        opacity: 1; 
        transform: translateY(0); 
    }
}

@keyframes ufpel-scale-in {
    0% { 
        opacity: 0; 
        transform: scale(0.9); 
    }
    100% { 
        opacity: 1; 
        transform: scale(1); 
    }
}

// =============================================================================
// UFPel Print Utilities
// =============================================================================

@media print {
    .print-ufpel-hidden { display: none !important; }
    .print-ufpel-visible { display: block !important; }
    
    .print-ufpel-break-before { break-before: page !important; }
    .print-ufpel-break-after { break-after: page !important; }
    .print-ufpel-break-inside-avoid { break-inside: avoid !important; }
    
    .print-ufpel-text-black { color: black !important; }
    .print-ufpel-bg-white { background: white !important; }
}

// =============================================================================
// UFPel Accessibility Utilities
// =============================================================================

// Reduce motion utilities
@media (prefers-reduced-motion: reduce) {
    .motion-ufpel-safe {
        animation: none !important;
        transition: none !important;
    }
    
    .motion-ufpel-safe * {
        animation: none !important;
        transition: none !important;
    }
}

// High contrast utilities
@media (prefers-contrast: high) {
    .contrast-ufpel-auto {
        color: black !important;
        background: white !important;
        border-color: black !important;
    }
}

// =============================================================================
// UFPel Responsive Utilities
// =============================================================================

// Hide/show on specific breakpoints
@each $breakpoint in map-keys($ufpel-grid-breakpoints) {
    @if $breakpoint != xs {
        @include media-breakpoint-down($breakpoint) {
            .hide-ufpel-#{$breakpoint}-down { display: none !important; }
        }
        
        @include media-breakpoint-up($breakpoint) {
            .hide-ufpel-#{$breakpoint}-up { display: none !important; }
            .show-ufpel-#{$breakpoint}-up { display: block !important; }
        }
    }
}

// Mobile-only utilities
@media (max-width: $ufpel-mobile-max) {
    .mobile-ufpel-full-width { width: 100% !important; }
    .mobile-ufpel-text-center { text-align: center !important; }
    .mobile-ufpel-p-2 { padding: 0.5rem !important; }
    .mobile-ufpel-m-2 { margin: 0.5rem !important; }
}

// Desktop-only utilities
@media (min-width: $ufpel-desktop-min) {
    .desktop-ufpel-text-left { text-align: left !important; }
    .desktop-ufpel-flex-row { flex-direction: row !important; }
}

// =============================================================================
// UFPel Debug Utilities (Development Only)
// =============================================================================

@if $ufpel-debug-enabled {
    .debug-ufpel {
        border: $ufpel-debug-border !important;
        position: relative;
        
        &::before {
            content: 'DEBUG';
            position: absolute;
            top: 0;
            right: 0;
            background: $ufpel-debug-color;
            color: white;
            padding: 0.125rem 0.25rem;
            font-size: 0.75rem;
            font-weight: bold;
            z-index: 9999;
        }
    }
    
    .debug-ufpel-grid {
        background-image: 
            linear-gradient(rgba($ufpel-debug-color, 0.1) 1px, transparent 1px),
            linear-gradient(90deg, rgba($ufpel-debug-color, 0.1) 1px, transparent 1px);
        background-size: 1rem 1rem;
    }
}

// =============================================================================
// UFPel Performance Utilities
// =============================================================================

// GPU acceleration
.gpu-ufpel {
    transform: translate3d(0, 0, 0);
    will-change: transform;
}

// Contain paint for better performance
.contain-ufpel-paint { contain: paint; }
.contain-ufpel-layout { contain: layout; }
.contain-ufpel-style { contain: style; }
.contain-ufpel-size { contain: size; }

// Isolation for performance
.isolate-ufpel { isolation: isolate; }

// Content visibility for lazy rendering
.content-ufpel-auto { content-visibility: auto; }
.content-ufpel-hidden { content-visibility: hidden; }
.content-ufpel-visible { content-visibility: visible; }

// =============================================================================
// UFPel Utility Mixins for Developers
// =============================================================================

// Mixin for creating responsive utilities
@mixin ufpel-responsive-utility($property, $values, $prefix: '') {
    @each $breakpoint in map-keys($ufpel-grid-breakpoints) {
        @include media-breakpoint-up($breakpoint) {
            $infix: if($breakpoint == xs, "", "-#{$breakpoint}");
            
            @each $key, $value in $values {
                .#{$prefix}#{$infix}-#{$key} {
                    #{$property}: $value !important;
                }
            }
        }
    }
}

// Mixin for creating hover utilities
@mixin ufpel-hover-utility($class-name, $property, $value) {
    .hover-ufpel-#{$class-name}:hover {
        #{$property}: $value !important;
    }
}

// Mixin for creating focus utilities
@mixin ufpel-focus-utility($class-name, $property, $value) {
    .focus-ufpel-#{$class-name}:focus {
        #{$property}: $value !important;
    }
}