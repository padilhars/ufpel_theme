define("theme_ufpel/accessibility",["exports","jquery","core/ajax"],(function(_exports,_jquery,_ajax){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_jquery),_ajax=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_ajax);class AccessibilityTools{constructor(){this.fontSizeKey="theme_ufpel_fontsize",this.contrastKey="theme_ufpel_highcontrast",this.vlibrasKey="theme_ufpel_vlibras",this.fontSize=100,this.highContrast=!1,this.vlibrasEnabled=!1,this.toolbar=null,this.loadSettings()}init(){this.createToolbar(),this.applySettings(),this.initVLibras(),this.addKeyboardShortcuts(),this.addSkipLinks(),this.enhanceKeyboardNavigation(),this.enhanceFocusIndicators()}createToolbar(){if(document.querySelector(".accessibility-toolbar"))return;const toolbar=document.createElement("div");toolbar.className="accessibility-toolbar",toolbar.setAttribute("role","toolbar"),toolbar.setAttribute("aria-label","Ferramentas de acessibilidade"),toolbar.innerHTML='<div class="accessibility-toolbar-content"><button class="a11y-toggle-btn" aria-label="Abrir ferramentas de acessibilidade"><i class="fa fa-universal-access" aria-hidden="true"></i></button><div class="a11y-tools" style="display:none;"><div class="a11y-tool-group"><span class="a11y-label">Tamanho da fonte:</span><button class="a11y-btn" id="font-decrease" aria-label="Diminuir fonte">A-</button><button class="a11y-btn" id="font-reset" aria-label="Redefinir fonte">A</button><button class="a11y-btn" id="font-increase" aria-label="Aumentar fonte">A+</button><span class="a11y-value" id="font-size-value">100%</span></div><div class="a11y-tool-group"><button class="a11y-btn a11y-toggle" id="toggle-contrast" aria-label="Alternar alto contraste" aria-pressed="false"><i class="fa fa-adjust" aria-hidden="true"></i> Alto Contraste</button></div><div class="a11y-tool-group"><button class="a11y-btn a11y-toggle" id="toggle-vlibras" aria-label="Ativar tradutor de Libras" aria-pressed="false"><i class="fa fa-sign-language" aria-hidden="true"></i> Libras</button></div><div class="a11y-tool-group"><a href="#main-content" class="a11y-btn a11y-link"><i class="fa fa-arrow-down" aria-hidden="true"></i> Ir para conteúdo</a></div><div class="a11y-tool-group"><button class="a11y-btn" id="reset-all-a11y" aria-label="Redefinir todas as configurações"><i class="fa fa-redo" aria-hidden="true"></i> Redefinir</button></div></div></div>',document.body.appendChild(toolbar),this.toolbar=toolbar,this.addToolbarStyles(),this.attachToolbarEvents()}addToolbarStyles(){const styles='.accessibility-toolbar{position:fixed;top:100px;right:0;z-index:9998;background:#fff;border:2px solid #0080FF;border-right:none;border-radius:8px 0 0 8px;box-shadow:-2px 2px 10px rgba(0,0,0,0.1);font-family:"DM Sans",sans-serif}.accessibility-toolbar-content{padding:8px}.a11y-toggle-btn{background:#0080FF;color:white;border:none;border-radius:4px;padding:10px;cursor:pointer;font-size:20px;transition:all 0.3s ease}.a11y-toggle-btn:hover{background:#00408F}.a11y-tools{margin-top:10px;min-width:200px}.a11y-tool-group{margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid #e0e0e0}.a11y-tool-group:last-child{border-bottom:none;margin-bottom:0}.a11y-label{display:block;font-size:12px;color:#666;margin-bottom:5px;font-weight:600}.a11y-btn{background:#f0f0f0;border:1px solid #ccc;border-radius:4px;padding:6px 10px;margin:2px;cursor:pointer;font-size:14px;transition:all 0.2s ease}.a11y-btn:hover{background:#e0e0e0;border-color:#0080FF}.a11y-btn:focus{outline:3px solid #F7A600;outline-offset:2px}.a11y-toggle{display:block;width:100%;text-align:left}.a11y-toggle[aria-pressed="true"]{background:#0080FF;color:white;border-color:#0080FF}.a11y-link{display:block;width:100%;text-decoration:none;color:#333;text-align:left}.a11y-value{display:inline-block;margin-left:8px;font-weight:bold;color:#0080FF}body.high-contrast{background:#000!important;color:#fff!important}body.high-contrast *{background-color:#000!important;color:#fff!important;border-color:#fff!important}body.high-contrast a{color:#ffff00!important;text-decoration:underline!important}body.high-contrast button,body.high-contrast .btn{background:#fff!important;color:#000!important;border:2px solid #fff!important}*:focus-visible{outline:3px solid #F7A600!important;outline-offset:2px!important}.skip-links{position:absolute;top:-9999px;left:-9999px;z-index:999999}.skip-links:focus-within{position:fixed;top:0;left:50%;transform:translateX(-50%)}.skip-link{display:inline-block;background:#0080FF;color:white;padding:10px 20px;text-decoration:none;border-radius:0 0 8px 8px;font-weight:bold}',styleSheet=document.createElement("style");styleSheet.textContent=styles,document.head.appendChild(styleSheet)}attachToolbarEvents(){const toggleBtn=this.toolbar.querySelector(".a11y-toggle-btn"),tools=this.toolbar.querySelector(".a11y-tools");toggleBtn.addEventListener("click",(()=>{const isVisible="none"!==tools.style.display;tools.style.display=isVisible?"none":"block",toggleBtn.setAttribute("aria-expanded",!isVisible)})),document.getElementById("font-decrease").addEventListener("click",(()=>{this.adjustFontSize(-10)})),document.getElementById("font-reset").addEventListener("click",(()=>{this.resetFontSize()})),document.getElementById("font-increase").addEventListener("click",(()=>{this.adjustFontSize(10)})),document.getElementById("toggle-contrast").addEventListener("click",(e=>{this.toggleHighContrast(),e.target.setAttribute("aria-pressed",this.highContrast)})),document.getElementById("toggle-vlibras").addEventListener("click",(e=>{this.toggleVLibras(),e.target.setAttribute("aria-pressed",this.vlibrasEnabled)})),document.getElementById("reset-all-a11y").addEventListener("click",(()=>{this.resetAll()}))}loadSettings(){const savedFontSize=localStorage.getItem(this.fontSizeKey);savedFontSize&&(this.fontSize=parseInt(savedFontSize,10));const savedContrast=localStorage.getItem(this.contrastKey);this.highContrast="true"===savedContrast;const savedVLibras=localStorage.getItem(this.vlibrasKey);this.vlibrasEnabled="true"===savedVLibras}applySettings(){this.applyFontSize(),this.highContrast&&document.body.classList.add("high-contrast"),this.updateVisualStates()}adjustFontSize(delta){this.fontSize=Math.max(80,Math.min(150,this.fontSize+delta)),this.applyFontSize(),this.saveFontSize(),this.updateVisualStates()}resetFontSize(){this.fontSize=100,this.applyFontSize(),this.saveFontSize(),this.updateVisualStates()}applyFontSize(){document.documentElement.style.fontSize=`${this.fontSize}%`}saveFontSize(){localStorage.setItem(this.fontSizeKey,this.fontSize.toString()),this.savePreference("theme_ufpel_fontsize",this.fontSize.toString())}toggleHighContrast(){this.highContrast=!this.highContrast,this.highContrast?document.body.classList.add("high-contrast"):document.body.classList.remove("high-contrast"),localStorage.setItem(this.contrastKey,this.highContrast.toString()),this.savePreference("theme_ufpel_highcontrast",this.highContrast?"1":"0"),this.updateVisualStates()}initVLibras(){if(this.vlibrasEnabled&&!window.VLibras){const script=document.createElement("script");script.src="https://vlibras.gov.br/app/vlibras-plugin.js",script.onload=()=>{new window.VLibras.Widget("https://vlibras.gov.br/app")},document.head.appendChild(script)}}toggleVLibras(){if(this.vlibrasEnabled=!this.vlibrasEnabled,this.vlibrasEnabled){if(!window.VLibras)this.initVLibras();else{const widget=document.querySelector("[vw]");widget&&(widget.style.display="block")}}else{const widget=document.querySelector("[vw]");widget&&(widget.style.display="none")}localStorage.setItem(this.vlibrasKey,this.vlibrasEnabled.toString()),this.savePreference("theme_ufpel_vlibras",this.vlibrasEnabled?"1":"0")}resetAll(){this.fontSize=100,this.highContrast=!1,this.vlibrasEnabled=!1,document.body.classList.remove("high-contrast"),document.documentElement.style.fontSize="",localStorage.removeItem(this.fontSizeKey),localStorage.removeItem(this.contrastKey),localStorage.removeItem(this.vlibrasKey),this.updateVisualStates();const widget=document.querySelector("[vw]");widget&&(widget.style.display="none")}updateVisualStates(){const fontSizeValue=document.getElementById("font-size-value");fontSizeValue&&(fontSizeValue.textContent=`${this.fontSize}%`);const contrastBtn=document.getElementById("toggle-contrast");contrastBtn&&contrastBtn.setAttribute("aria-pressed",this.highContrast.toString());const vlibrasBtn=document.getElementById("toggle-vlibras");vlibrasBtn&&vlibrasBtn.setAttribute("aria-pressed",this.vlibrasEnabled.toString())}addSkipLinks(){const skipLinks=document.createElement("div");skipLinks.className="skip-links",skipLinks.innerHTML='<a href="#main-content" class="skip-link">Pular para conteúdo principal</a><a href="#nav-drawer" class="skip-link">Pular para navegação</a><a href="#page-footer" class="skip-link">Pular para rodapé</a>',document.body.insertBefore(skipLinks,document.body.firstChild)}addKeyboardShortcuts(){document.addEventListener("keydown",(e=>{e.altKey&&"a"===e.key&&(e.preventDefault(),this.toolbar.querySelector(".a11y-toggle-btn").click()),e.altKey&&"c"===e.key&&(e.preventDefault(),this.toggleHighContrast()),e.altKey&&"+"===e.key&&(e.preventDefault(),this.adjustFontSize(10)),e.altKey&&"-"===e.key&&(e.preventDefault(),this.adjustFontSize(-10)),e.altKey&&"0"===e.key&&(e.preventDefault(),this.resetFontSize())}))}enhanceKeyboardNavigation(){document.querySelectorAll("main, nav, section, article, aside, footer").forEach((el=>{el.hasAttribute("tabindex")||el.setAttribute("tabindex","-1")}));const main=document.querySelector("main, [role=\"main\"], #region-main");main&&!main.id&&(main.id="main-content")}enhanceFocusIndicators(){document.addEventListener("mousedown",(()=>{document.body.classList.add("using-mouse")})),document.addEventListener("keydown",(()=>{document.body.classList.remove("using-mouse")}));const style=document.createElement("style");style.textContent="body.using-mouse *:focus{outline:none!important}",document.head.appendChild(style)}async savePreference(name,value){try{await _ajax.default.call([{methodname:"core_user_update_user_preferences",args:{preferences:[{name:name,value:value}]}}])}catch(error){console.warn(`Failed to save ${name} preference:`,error)}}}_exports.init=()=>{const accessibility=new AccessibilityTools;accessibility.init(),window.UFPelAccessibility=accessibility},(0,_jquery.default)(document).ready((()=>{(0,_exports.init)()}))}))

//# sourceMappingURL=accessibility.min.js.map